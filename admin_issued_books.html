<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>librosphere</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=ABeeZee&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abel&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abhaya+Libre&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Aclonica&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:300,400,500">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway+Dots">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,300,400&amp;display=swap">
    <link rel="stylesheet" href="assets/css/swiper-icons.css">
    <link rel="stylesheet" href="assets/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/About-US.css">
    <link rel="stylesheet" href="assets/css/Account-setting-or-edit-profile.css">
    <link rel="stylesheet" href="assets/css/best-carousel-slide.css">
    <link rel="stylesheet" href="assets/css/card-3-column-animation-shadows-images.css">
    <link rel="stylesheet" href="assets/css/Contact-Us.css">
    <link rel="stylesheet" href="assets/css/dh-row-text-image-right-responsive.css">
    <link rel="stylesheet" href="assets/css/dh-row-titile-text-image-right-1.css">
    <link rel="stylesheet" href="assets/css/Features-Image-images.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.6.5/css/buttons.dataTables.min.css">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.21/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.2/css/theme.bootstrap_4.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css">
    <link rel="stylesheet" href="assets/css/Latest-Blog.css">
    <link rel="stylesheet" href="assets/css/Login-Form-Basic-icons.css">
    <link rel="stylesheet" href="assets/css/login-form-styles.css">
    <link rel="stylesheet" href="assets/css/login-form.css">
    <link rel="stylesheet" href="assets/css/Ludens---1-Index-Table-with-Search--Sort-Filters-v20.css">
    <link rel="stylesheet" href="assets/css/Ludens-Users---2-Register.css">
    <link rel="stylesheet" href="assets/css/Pretty-Registration-Form-.css">
    <link rel="stylesheet" href="assets/css/Pretty-Search-Form-.css">
    <link rel="stylesheet" href="assets/css/Pretty-Table-tables.css">
    <link rel="stylesheet" href="assets/css/Pretty-Table.css">
    <link rel="stylesheet" href="assets/css/Profile-Edit-Form-styles.css">
    <link rel="stylesheet" href="assets/css/Profile-Edit-Form.css">
    <link rel="stylesheet" href="assets/css/Register-form.css">
    <link rel="stylesheet" href="assets/css/Search-Input-Responsive-with-Icon.css">
    <link rel="stylesheet" href="assets/css/Search-Input-responsive.css">
    <link rel="stylesheet" href="assets/css/Sign-Up-Form---Gabriela-Carvalho.css">
    <link rel="stylesheet" href="assets/css/Swiper-Card-Blog.css">
    <link rel="stylesheet" href="assets/css/Table-With-Search-search-table.css">
    <link rel="stylesheet" href="assets/css/Table-With-Search.css">
    <link rel="stylesheet" href="assets/css/Tamplate-SB-Admin-on-BSS.css">
    <link rel="stylesheet" href="assets/css/User-Payment-Overview-Rows---Panel-Container.css">

    <script src="https://www.gstatic.com/firebasejs/7.13.1/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.13.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.13.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.13.1/firebase-database.js"></script>
</head>

<body>
    <div>
        <nav class="navbar navbar-expand bg-dark sb-topnav navbar-dark">
            <div class="container-fluid"><button class="btn btn-link btn-sm link-light order-md-1" id="sidebarToggle"
                    type="button"></button><a class="navbar-brand" href="#">LibroSphere</a>
                <form class="d-none d-md-inline-block order-2 ms-auto me-0 me-md-3 my-2 my-md-0">
                    <div class="input-group"></div>
                </form>
                <ul class="navbar-nav d-flex order-3 ms-auto ms-md-0">
                    <li class="nav-item d-flex d-sm-flex d-md-none justify-content-center align-items-center justify-content-sm-center"
                        style="margin-right: 7px;">
                        <div class="nav-item dropdown no-arrow"><a class="dropdown-toggle" aria-expanded="false"
                                data-bs-toggle="dropdown" href="#"><i class="fa fa-search"
                                    style="font-size: 25px;margin-right: 0px;"></i> </a>
                            <div class="dropdown-menu"><a class="dropdown-item" href="#">First Item</a><a
                                    class="dropdown-item" href="#">Second Item</a><a class="dropdown-item"
                                    href="#">Third Item</a></div>
                        </div>
                    </li>
                    <li class="nav-item d-flex justify-content-center align-items-center">
                        <div class="nav-item dropdown no-arrow"><a class="dropdown-toggle active" aria-expanded="false"
                                data-bs-toggle="dropdown" href="#">&nbsp;</a>
                            <div class="dropdown-menu dropdown-menu-end text-start shadow" style="margin-top: 16px;"><a
                                    class="dropdown-item" href="#">Pengaturan</a><a class="dropdown-item" href="#">Log
                                    Aktivitas</a><a class="dropdown-item" href="#">Pelanggaran</a>
                                <div class="dropdown-divider"></div><a class="dropdown-item" href="#">Keluar</a>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </nav>
        <div id="layoutSidenav">
            <div id="layoutSidenav_nav">
                <div id="sidenavAccordion" class="sb-sidenav accordion sb-sidenav-dark">
                    <div class="sb-sidenav-menu">
                        <div class="nav">
                            <div>
                                <a class="nav-link active" href="admin_issued_books.html"><span>Issued Book</span></a>
                            </div>
                            <div>
                                <div id="collapseLayouts" class="collapse" aria-labelledby="headingOne"
                                    data-bs-parent="#sidenavAccordion">
                                    <div class="sb-sidenav-menu-nested nav"><a class="nav-link" href="#">Menu
                                            Accordion</a><a class="nav-link" href="#">Menu Accordion</a></div>
                                </div>
                            </div>
                            <div>
                                <div id="collapse2" class="collapse" aria-labelledby="heading2"
                                    data-bs-parent="#sidenavAccordion">
                                    <div id="sidenavAccordionPages" class="sb-sidenav-menu-nested nav accordion"><a
                                            class="nav-link collapsed" href="#" aria-expanded="false"
                                            aria-controls="pagesCollapseAuth" data-bs-toggle="collapse"
                                            data-bs-target="#pagesCollapseAuth"><span>Menu Item</span>
                                            <div class="sb-sidenav-collapse-arrow"><i class="fa fa-angle-down"></i>
                                            </div>
                                        </a>
                                        <div id="pagesCollapseAuth" class="collapse" aria-labelledby="headingOne"
                                            data-bs-parent="#sidenavAccordionPages">
                                            <div class="sb-sidenav-menu-nested nav"><a class="nav-link" href="#">Menu
                                                    Item</a><a class="nav-link" href="#">Menu Item</a><a
                                                    class="nav-link" href="#">Menu Item</a></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="sb-sidenav-footer">
                        <div class="small"><span>Logged as : Maryam</span></div>
                    </div>
                </div>
            </div>
            <div id="layoutSidenav_content">
                <main></main>
                <section class="mt-4">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col" style="padding-top: 10px;margin-top: 79px;margin-bottom: 204px;">
                                <div class="card shadow">
                                    <div class="card-header py-2">
                                        <p class="lead text-info m-0"><strong>Issued Books</strong></p>
                                    </div>
                                    <div class="card-body" style="padding-bottom: 66px;">
                                        <div class="table-responsive table mb-0 pt-3 pe-2">
                                            <table class="table table-striped table-sm my-0 mydatatable">
                                                <thead>
                                                    <tr>
                                                        <th>Name&nbsp;</th>
                                                        <th>id number</th>
                                                        <th>name of the book</th>
                                                        <th>serial number</th>
                                                        <th>return Date</th>
                                                        <th>Status&nbsp;</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="body-data">
                                                    <!-- <tr class="tableData">
                                                        <td>Rawan</td>
                                                        <td>fgf</td>
                                                        <td>thth</td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr> -->
                                                </tbody>
                                            </table>
                                        </div><button class="btn btn-primary" type="button"
                                            style="width: 155.333px;" onclick="reportForBook()">Returned&nbsp;</button><button
                                            class="btn btn-danger" type="button"
                                            style="width: 142.333px;margin-left: 38px;" onclick="reportForBook()">expierd</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.6.0/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.21/js/jquery.dataTables.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.21/js/dataTables.bootstrap4.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.5/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.5/js/buttons.flash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.5/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.5/js/buttons.print.min.js"></script>
    <script src="assets/js/DataTable---Fully-BSS-Editable-style.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.2/js/jquery.tablesorter.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.2/js/widgets/widget-filter.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.2/js/widgets/widget-storage.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://geodata.solutions/includes/countrystate.js"></script>
    <script
        src="assets/js/Ludens---1-Index-Table-with-Search--Sort-Filters-v20-Ludens---1-Index-Table-with-Search--Sort-Filters.js"></script>
    <script
        src="assets/js/Ludens---1-Index-Table-with-Search--Sort-Filters-v20-Ludens---Material-UI-Actions.js"></script>
    <script src="assets/js/Profile-Edit-Form-profile.js"></script>
    <script src="assets/js/Swiper-Card-Blog-swiper-bundle.min.js"></script>
    <script src="assets/js/Swiper-Card-Blog-swiper.js"></script>
    <script src="assets/js/Table-With-Search-search-table.js"></script>
    <script src="assets/js/theme.js"></script>



    <script>
        // Import the functions you need from the SDKs you need

        const firebaseConfig = {
            apiKey: "AIzaSyAOwGBvYe1w_vFFVOeF04Uhhot7-CX4Hk8",
            authDomain: "librosphere-9b371.firebaseapp.com",
            projectId: "librosphere-9b371",
            storageBucket: "librosphere-9b371.appspot.com",
            databaseURL: "librosphere-9b371-default-rtdb.firebaseio.com",
            messagingSenderId: "103165721536",
            appId: "1:103165721536:web:e02a086e341b6738152625",
            measurementId: "G-3SYC6MFZE7"
        };

        firebase.initializeApp(firebaseConfig);
        console.log("Error:  " + firebase.authDomain);
        // Reference to your Firebase Realtime Database
        var database = firebase.database();
        var tableRef = database.ref('issuedBooks'); // Assuming you have a 'issuedBooks' node in your database

        // var loginBtn = document.getElementById("loginButton");
        // var registerBtn = document.getElementById("registerButton");
        // Check the user's login status
        // firebase.auth().onAuthStateChanged(function (user) {
        //     if (user) {
        //         // User is signed in, redirect to another page
        //         loginBtn.style.display = "none";
        //         registerBtn.style.display = "none";
        //         console.log("user: " + user.uid);

        //         idU = (user.uid).trim();


        //     } else {
        //         // User is not signed in
        //         loginBtn.style.display = "block";
        //         registerBtn.style.display = "block";
        //         console.log("No user is signed in");
        //     }
        // });

        // Function to create a table element based on book data
        function createTable(tableData, count) {
            const table = document.createElement("tr");
            table.className = "tableData";

            table.innerHTML = `
            <tr>
                <td>${tableData.usreFullName}</td>
                <td>${tableData.userID}</td>
                <td>${tableData.bookName}</td>
                <td>${tableData.serialNumber}</td>
                <td>${tableData.returnDate}</td>
                <td>${tableData.status}</td>
            </tr>
    `;

            return table;
        }
        var count = 0;


        // Function to create a list of card elements based on an array of book data 
        function createTableList(tableDataList) {
            const tableListContainer = document.getElementById("body-data");

            // bookDataList2 = bookDataList;

            for (const tableData of tableDataList) {
                const table = createTable(tableData, (count));
                tableListContainer.appendChild(table);

                count += 1;
                console.log(table);
            }


        }


        // Retrieve table data from Firebase Realtime Database
        tableRef.once('value')
            .then(function (snapshot) {
                const tableDataList = [];

                snapshot.forEach(function (childSnapshot) {
                    const tableData = childSnapshot.val();
                    tableDataList.push(tableData);
                    console.log('Data: ', tableData);
                });

                // Call the function to create the table list
                createTableList(tableDataList);
            })
            .catch(function (error) {
                console.error("Error retrieving table data:", error);
            });


            function reportForBook(){
                window.location.href = "admin_issue_book.html";
            }

    </script>
</body>

</html>